{% extends "base2.html" %}
{% block body %}
 <section class="section">
      <div class="row">
        <div class="col-lg-12">

          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Leave Requests</h5>
              <table class="table datatable">
                <thead>
                  <tr>
                    <th scope="col">sl.no</th>
                    <th scope="col">Photo</th>
                    <th scope="col">Employee Name</th>
                    <th scope="col">Department</th>
                    <th scope="col">Post</th>
                       <th scope="col">Date From</th>
                       <th scope="col">Date to</th>
                      <th scope="col">No. of Days</th>
                       <th scope="col">Type</th>
                      <th scope="col">Reason</th>
                  </tr>
                </thead>
                <tbody>
        </tr>{% for i in data %}
        <tr>

             <td>&nbsp;{{ loop.index }}</td>
           <td><img src="{{ i['photo'] }}" height="50px" width="50px"></td>
            <td>{{ i['name'] }}</td>
            <td>{{ i['dept'] }}</td>
             <td>{{ i['post'] }}</td>
            <td>{{ i['datefrom'] }}</td>
            <td>{{ i['dateto'] }}</td>
            <td>{{ i['days'] }}</td>
            <td>{{ i['type'] }}</td>
            <td>{{ i['reason'] }}</td>
            <td>{{ i['leavestatus'] }}</td>
            <td><a href="/viewleavemn/{{ i['empid'] }}">View No. of Leave</a></td>
            <td><a href="/acceptappl2/{{ i['requestid'] }}" onclick="doAction('accept','Are you sure ?');">Accept</a></td>
            <td><a href="/rejectappl2/{{ i['empid'] }}" onclick="doAction('reject','Are sure to Reject the request')">Reject</a></td>
             {% endfor %}
        </tr>
    </table>
</center>
<script>
    function doAction(action,message){
        if(confirm(message)){
            console.log(action +'is confirmed');
        }
        else{
            console.log(action + 'is cancelled')
            event.preventDefault()
        }
    }
</script>
{% endblock %}